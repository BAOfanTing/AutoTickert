/*!
 *  build: h5-hzgh 
 *  copyright: xiexy xiexy@increator.cn 
 *  time: 2025-8-14 09:43:52
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-337319e5"],{4406:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"h",(function(){return u}));var i=n("b775");function a(t={}){return Object(i["a"])({url:"/interf/front/OL/OL56",method:"post",data:t})}function s(t={}){return Object(i["a"])({url:"/interf/front/OL/OL58",method:"post",data:t})}function r(t={}){return Object(i["a"])({url:"/interf/front/OL/OL60",method:"post",data:t})}function o(t={}){return Object(i["a"])({url:"/interf/front/OL/OL76",method:"post",data:t})}function d(t={}){return Object(i["a"])({url:"/interf/front/OL/OL77",method:"post",data:t})}function c(t={}){return Object(i["a"])({url:"/interf/front/OL/OL78",method:"post",data:t})}function l(t={}){return Object(i["a"])({url:"/interf/front/RM/RM04",method:"post",data:t})}function u(t={}){return Object(i["a"])({url:"/interf/front/RM/RM05",method:"post",data:t,handleCatch:!0})}},"9f0b":function(t,e,n){},a0f1:function(t,e,n){"use strict";n("9f0b")},ec15:function(t,e,n){"use strict";n.d(e,"p",(function(){return a})),n.d(e,"q",(function(){return s})),n.d(e,"r",(function(){return r})),n.d(e,"s",(function(){return o})),n.d(e,"t",(function(){return d})),n.d(e,"u",(function(){return c})),n.d(e,"v",(function(){return l})),n.d(e,"w",(function(){return u})),n.d(e,"x",(function(){return h})),n.d(e,"y",(function(){return f})),n.d(e,"o",(function(){return p})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return O})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return g})),n.d(e,"h",(function(){return y})),n.d(e,"i",(function(){return w})),n.d(e,"j",(function(){return C})),n.d(e,"k",(function(){return j})),n.d(e,"l",(function(){return L})),n.d(e,"m",(function(){return M})),n.d(e,"n",(function(){return x})),n.d(e,"a",(function(){return I})),n.d(e,"z",(function(){return T})),n.d(e,"A",(function(){return R})),n.d(e,"B",(function(){return $}));var i=n("b775");function a(t={}){return Object(i["a"])({url:"/interf/front/OP/OP29",method:"post",data:t})}function s(t={}){return Object(i["a"])({url:"/interf/front/OP/OP31",method:"post",data:t})}function r(t={}){return Object(i["a"])({url:"/interf/front/OV/OV01",method:"post",data:t})}function o(t={}){return Object(i["a"])({url:"/interf/front/OV/OV02",method:"post",data:t})}function d(t={}){return Object(i["a"])({url:"/interf/front/OV/OV03",method:"post",data:t})}function c(t={}){return Object(i["a"])({url:"/interf/front/OV/OV04",method:"post",data:t,handleCatch:!0})}function l(t={}){return Object(i["a"])({url:"/interf/front/OV/OV05",method:"post",data:t})}function u(t={}){return Object(i["a"])({url:"/interf/front/OV/OV06",method:"post",data:t,handleCatch:!0})}function h(t={}){return Object(i["a"])({url:"/interf/front/OV/OV07",method:"post",data:t})}function f(t={}){return Object(i["a"])({url:"/interf/front/OV/OV08",method:"post",data:t,handleCatch:!0})}function p(t={}){return Object(i["a"])({url:"/interf/front/OP/OP18",method:"post",data:t})}function m(t={}){return Object(i["a"])({url:"/interf/front/OL/OL01",method:"post",data:t})}function _(t={}){return Object(i["a"])({url:"/interf/front/OL/OL02",method:"post",data:t})}function O(t={}){return Object(i["a"])({url:"/interf/front/OL/OL03",method:"post",data:t,handleCatch:!0})}function v(t={}){return Object(i["a"])({url:"/interf/front/OL/OL26",method:"post",data:t,handleCatch:!0})}function b(t={}){return Object(i["a"])({url:"/interf/front/OL/OL27",method:"post",data:t,handleCatch:!0})}function g(t={}){return Object(i["a"])({url:"/interf/front/OL/OL38",method:"post",data:t,handleCatch:!0})}function y(t={}){return Object(i["a"])({url:"/interf/front/OL/OL39",method:"post",data:t,handleCatch:!0})}function w(t={}){return Object(i["a"])({url:"/interf/front/OL/OL40",method:"post",data:t,handleCatch:!0})}function C(t={}){return Object(i["a"])({url:"/interf/front/OL/OL41",method:"post",data:t,handleCatch:!0})}function j(t={}){return Object(i["a"])({url:"/interf/front/OL/OL42",method:"post",data:t,handleCatch:!0})}function L(t={}){return Object(i["a"])({url:"/interf/front/OL/OL43",method:"post",data:t,handleCatch:!0})}function M(t={}){return Object(i["a"])({url:"/interf/front/OL/OL44",method:"post",data:t,handleCatch:!0})}function x(t={}){return Object(i["a"])({url:"/interf/front/OL/OL81",method:"post",data:t})}function I(t={}){return Object(i["a"])({url:"/interf/front/JT/JT02",method:"post",data:t})}function T(t={}){return Object(i["a"])({url:"/interf/front/RM/RM16",method:"post",data:t,handleCatch:!0})}function R(t={}){return Object(i["a"])({url:"/interf/front/RM/RM17",method:"post",data:t,handleCatch:!0})}function $(t={}){return Object(i["a"])({url:"/interf/front/RM/RM18",method:"post",data:t,handleCatch:!0})}},fb2c:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"prize-details"},[["2","5"].includes(t.details.quali_type)&&"9"!==t.id&&"10"!==t.id&&"11"!==t.id?n("p",{staticClass:"member"},[t._v(" "+t._s("2"===t.details.quali_type?"认证会员":"实名用户、认证会员")+" ")]):t._e(),!["2","5"].includes(t.details.quali_type)||"9"!==t.id&&"10"!==t.id&&"11"!==t.id?t._e():n("p",{staticClass:"member2"},[t._v(" "+t._s("2"===t.details.quali_type?"认证会员":"实名用户、认证会员")+" ")]),n("p",{staticClass:"state"},[t._v(t._s(t.stateText))]),n("van-swipe",{staticClass:"swiper",attrs:{autoplay:3e3,"indicator-color":"white"}},[n("van-swipe-item",[n("img",{attrs:{alt:"",src:t.details.photo_url2}})])],1),n("div",{staticClass:"details-wrapper"},[n("p",{staticClass:"name"},[t._v(t._s(t.details.exchange_name))]),["1","3"].includes(t.type)?n("div",{staticClass:"integral"},[n("p",[n("span",[t._v(t._s(t.details.integral))]),t._v(" 积分 ")]),"3"===t.type?n("p",{staticStyle:{"text-align":"center"}},[t._v("新认证会员免积分")]):t._e(),"8"===t.id&&"5"===t.details.quali_type?n("p",{staticStyle:{"text-align":"right"}},[t._v(" 实名用户1天最多1张，1周最多3张 "),n("br"),t._v(" 认证会员1天最多2张，1周最多14张 ")]):t._e(),"9"!==t.id&&"10"!==t.id&&"11"!==t.id||"5"!==t.details.quali_type?n("p",[t._v("限领"+t._s(t.details.exchange_num)+"次")]):n("p",{staticStyle:{"text-align":"right"}},[t._v(" 认证会员1天最多兑换3次绿色出行抵扣券 "),n("br"),t._v(" 实名用户1天最多兑换2次绿色出行抵扣券 ")])]):t._e(),"2"===t.type?n("div",{staticClass:"promotion-price"},[n("p",{staticClass:"ago"},[t._v("日常："+t._s(t.details.normal_integral)+"积分")]),n("p",{staticClass:"now"},[t._v(" 生日月福利： "),n("span",[t._v(t._s(t.details.integral))]),t._v(" 积分 ")])]):t._e(),n("div",{staticClass:"date-range"},[n("p",[t._v("活动时间："+t._s(t.details.time_des))]),"2"===t.type?n("p",[t._v("可兑换时间："+t._s(t.details.time_des_exc))]):t._e(),"8"===t.id||"9"===t.id||"10"===t.id||"11"===t.id?n("p",{staticStyle:{display:"flex","justify-content":"space-between"}},[t._v(" 下一轮发券时间："+t._s(t.nextTime)+" "),t.diffInSeconds<=300&&t.diffInSeconds>=1?n("span",[t._v("倒计时"+t._s(t.diffInSeconds)+"秒")]):t._e()]):t._e()]),n("div",{staticClass:"progress-bar"},[n("div",{staticClass:"bar"},[n("p",{style:{width:t.progressBarWidth}})]),n("p",{staticClass:"text"},[t._v("剩余"+t._s(t.details.remain_num)+"/共"+t._s(t.details.total_num))])]),["1","3"].includes(t.type)&&"0"===t.details.is_coupon&&t.details.list&&t.details.list.length>0?n("div",{staticClass:"coupon-code"},[n("div",{staticClass:"title"},[n("p",[t._v(" 优惠兑换码 "),n("span",[t._v("（"+t._s(t.details.list.length)+"张）")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.details.list.length>1,expression:"details.list.length > 1"}],staticClass:"btn",on:{click:t.toViewMore}},[t._v(" "+t._s("0"===t.details.showType?"查看更多":"收起")+" ")])]),n("ul",t._l("0"===t.details.showType?t.details.list.slice(0,1):t.details.list,(function(e,i){return n("li",{key:i},[n("p",{staticClass:"code"},[n("i"),t._v(" "+t._s(e.coupon_code)+" ")]),n("p",{staticClass:"copy",on:{click:function(n){return t.onCopy(e)}}},[n("i"),t._v(" "+t._s(e.code_url?"前往使用":"复制优惠码")+" ")])])})),0)]):t._e(),n("div",{staticClass:"intro"},[n("p",{staticClass:"title"},[t._v("活动规则")]),n("p",{staticClass:"content",domProps:{innerHTML:t._s(t.details.instruction)}})])]),["1","3"].includes(t.type)?n("div",{staticClass:"bottom-btn-bar"},[t.details.phone?n("div",{staticClass:"tel",on:{click:t.toCall}},[n("i"),n("p",[t._v("联系客服")])]):t._e(),n("p",{staticClass:"my-integral"},[t._v(" 我的积分： "),n("span",[t._v(t._s(t.details.remain_integral))])]),n("div",{staticClass:"btn-group"},[n("button",{class:{orange:t.details.list&&t.details.list.length>0},attrs:{disabled:t.getBtnState},on:{click:t.toGetOL}},[t._v(" 立即兑换 ")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.details.list&&t.details.list.length>0&&"3"!==t.id,expression:"details.list && details.list.length > 0 && id !== '3'"}],attrs:{disabled:t.useBtnState},on:{click:t.toUse}},[t._v(" 立即使用 ")])])]):t._e(),"2"===t.type?n("div",{staticClass:"bottom-btn"},["1"===t.details.zt||"2"===t.details.zt?["1"===t.details.quail_state?n("button",{on:{click:function(e){return t.toGetRM(t.RM18)}}},[t._v(" 您当前处于生日月，目前还有"+t._s(t.details.remain_quail)+"次机会兑换。 ")]):t._e(),"2"===t.details.quail_state?n("button",{staticClass:"orange"},[t._v(" 抱歉，您还未到生日月，请届时再来。 ")]):t._e(),"3"===t.details.quail_state?n("button",{staticClass:"grey",on:{click:function(e){return t.$customerTypeConfirm()}}},[t._v(" 非认证会员，请认证后再来兑换。 ")]):t._e()]:t._e(),"0"===t.details.zt||"3"===t.details.zt?n("button",{attrs:{disabled:""}},[t._v("立即兑换")]):t._e(),"5"===t.details.zt?n("button",{attrs:{disabled:""}},[t._v("未到兑换时间")]):t._e()],2):t._e(),n("van-popup",{attrs:{closeable:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("img",{staticStyle:{width:"80vw",margin:"50px 10vw"},attrs:{alt:"",src:t.$imgDomain+"/birthdayMonthBenefits/srkl.gif"}})])],1)},a=[],s=(n("38dd"),n("b855")),r=n("ec15"),o=n("4406"),d=n("154d"),c=n.n(d),l={data(){return{RM18:r["B"],id:this.$route.query.id,activityId:this.$route.query.activityId,type:this.$route.query.type,details:{list:[]},show:!1,diffInSeconds:"",timer:null}},computed:{progressBarWidth(){const{total_num:t,remain_num:e}=this.details;return(t-e)/t*100+"%"},getBtnState(){const{result:t,remain_integral:e,integral:n,zt:i}=this.details;return"0"!==t||(Number(e)<Number(n)||"1"!==i)},useBtnState(){return"0"!==this.details.result},stateText(){const{zt:t,remain_num:e}=this.details;return["0","1","2","3"].includes(t)&&e<=0?"已领完":"4"===t&&e<=0?"已结束":"4"===t&&e>0?"已过期":"0"===t?"未开始":"1"===t?"进行中":"2"===t?"已领完":"3"===t?"已结束":"5"===t?"未到兑换时间":""},nextTime(){const t=c()(new Date).format("HH:mm");return t.split(":").join("")>=1700?c()().add(1,"day").format("YYYY-MM-DD")+" 07:00":t.split(":").join("")>=1130?c()(new Date).format("YYYY-MM-DD")+" 17:00":t.split(":").join("")>=700?c()(new Date).format("YYYY-MM-DD")+" 11:30":c()(new Date).format("YYYY-MM-DD")+" 07:00"}},created(){"1"===this.type&&this.fetchActivityOLInfo(),["2","3"].includes(this.type)&&this.fetchActivityRMInfo()},beforeDestroy(){this.timer&&clearInterval(this.timer)},methods:{fetchActivityOLInfo(){Object(r["i"])({exchange_id:this.id}).then(t=>{const e={...t,showType:"0"};this.details=e}).catch(t=>{const e={...t,showType:"0"};if(this.details=e,"0"===t.zt){const e=new Date(t.begin_time).getTime(),n=e-Number(t.now);this.diffInSeconds=parseInt(n/1e3),this.showCountDown(),this.timer=setInterval(()=>{this.diffInSeconds--,this.showCountDown()},1e3)}this.$toast.fail(t.msg)})},showCountDown(){this.diffInSeconds<1&&(this.details.result="0",this.details.zt="1",this.timer&&clearInterval(this.timer))},fetchActivityRMInfo(){Object(r["A"])({award_id:this.id,activity_id:this.activityId}).then(t=>{this.details=t,console.log(t)}).catch(t=>{this.details=t,this.$toast.fail(t.msg)})},toGetOL(){"1"===this.type?this.$dialog.confirm({message:this.details.clew}).then(()=>{Object(r["j"])({exchange_id:this.id}).then(t=>{this.$toast.success(t.msg),setTimeout(()=>{this.fetchActivityOLInfo()},1500)}).catch(({msg:t})=>{this.$dialog.alert({message:t,confirmButtonText:"我知道了"}).then(()=>{})})}).catch(()=>{}):"2"===this.type?this.toGetRM(r["B"]):"3"===this.type&&this.toGetRM(o["h"])},toGetRM(t){this.$dialog.confirm({title:"提示",message:`本次兑换最终需消耗积分${this.details.integral}，是否兑换？`}).then(()=>{const{remain_quail:e,remain_num:n,remain_integral:i,integral:a}=this.details;return e<=0?this.$toast("您的兑换次数已用完"):n<=0?this.$toast("商品已经被兑换完"):a>i?this.$toast("抱歉，您的积分不足"):void t({award_id:this.id,activity_id:this.activityId}).then(()=>{"2"===this.type&&(this.show=!0),setTimeout(()=>{this.$dialog.confirm({title:"兑换成功",message:"3"===this.type&&"12"===this.activityId?"温馨提示:请及时登录本人支付宝激活杭州文旅惠民卡。":"请前往【我的】-【我的中奖记录】内页面查看奖品",cancelButtonText:"继续兑换",confirmButtonText:"查看"}).then(()=>{this.$router.push("/myWinningRecord/home")}).catch(()=>{this.fetchActivityRMInfo()})},3e3)}).catch(({msg:t})=>{this.$dialog.alert({message:t,confirmButtonText:"我知道了"}).then(()=>{})})}).catch(()=>{})},toViewMore(){this.details.showType="0"===this.details.showType?"1":"0"},toCall(){window.location.href="tel://"+this.details.phone},toUse(){const t=["4","5","6","7","8","9","10","11"];Object(r["a"])({type:"8"===this.details.exchange_id||"9"===this.details.exchange_id||"10"===this.details.exchange_id||"11"===this.details.exchange_id?"1":"0"}).then(e=>{if(t.includes(this.details.exchange_id))return window.open(e.jt_mall_url);this.details.address.indexOf("|")>-1?this.openMiniProgram():window.open(this.details.address)})},openNavigation(){const{address:t,park_name:e,Long_latitude:n}=this.details;Object(s["a"])({type:"jumpMap",postParameter:{longitude:n.split(",")[0],latitude:n.split(",")[1],address:t,title:e}})},openMiniProgram(){const t=this.details.address.split("|");Object(s["a"])({type:"jumpWXMiniProgram",postParameter:{username:t[0],path:t[1],miniProgramType:"0"}})},onCopy(t){let e=document.createElement("input");e.value=t.coupon_code,document.body.appendChild(e),e.select(),document.execCommand("Copy"),document.body.removeChild(e),t.code_url?window.location.href=t.code_url:this.$toast("复制成功！")}}},u=l,h=(n("a0f1"),n("1805")),f=Object(h["a"])(u,i,a,!1,null,"0c54229e",null);e["default"]=f.exports}}]);